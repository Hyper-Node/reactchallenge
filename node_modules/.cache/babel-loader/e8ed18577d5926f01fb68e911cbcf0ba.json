{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_useForkRef as useForkRef, unstable_useId as useId } from '@mui/utils';\nimport { ActionTypes } from './types';\nimport defaultReducer from './defaultListboxReducer';\nimport useControllableReducer from './useControllableReducer';\nimport areArraysEqual from '../utils/areArraysEqual';\nconst defaultOptionComparer = (optionA, optionB) => optionA === optionB;\nexport default function useListbox(props) {\n  var _props$optionIdGenera, _options$highlightedI;\n  const {\n    disableListWrap = false,\n    disabledItemsFocusable = false,\n    id: idProp,\n    options,\n    multiple = false,\n    isOptionDisabled = () => false,\n    optionComparer = defaultOptionComparer,\n    stateReducer: externalReducer,\n    listboxRef: externalListboxRef\n  } = props;\n  const id = useId(idProp);\n  function defaultIdGenerator(_, index) {\n    return \"\".concat(id, \"-option-\").concat(index);\n  }\n  const optionIdGenerator = (_props$optionIdGenera = props.optionIdGenerator) != null ? _props$optionIdGenera : defaultIdGenerator;\n  const propsWithDefaults = _extends({}, props, {\n    disableListWrap,\n    disabledItemsFocusable,\n    isOptionDisabled,\n    multiple,\n    optionComparer\n  });\n  const listboxRef = React.useRef(null);\n  const handleRef = useForkRef(externalListboxRef, listboxRef);\n  const [{\n    highlightedIndex,\n    selectedValue\n  }, dispatch] = useControllableReducer(defaultReducer, externalReducer, propsWithDefaults);\n  const previousOptions = React.useRef([]);\n  React.useEffect(() => {\n    if (areArraysEqual(previousOptions.current, options, optionComparer)) {\n      return;\n    }\n    dispatch({\n      type: ActionTypes.optionsChange,\n      options,\n      previousOptions: previousOptions.current,\n      props: propsWithDefaults\n    });\n    previousOptions.current = options; // No need to re-run this effect if props change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [options, optionComparer, dispatch]);\n  const createHandleOptionClick = (option, other) => event => {\n    var _other$onClick;\n    (_other$onClick = other.onClick) == null ? void 0 : _other$onClick.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    event.preventDefault();\n    dispatch({\n      type: ActionTypes.optionClick,\n      option,\n      event,\n      props: propsWithDefaults\n    });\n  };\n  const createHandleKeyDown = other => event => {\n    var _other$onKeyDown;\n    (_other$onKeyDown = other.onKeyDown) == null ? void 0 : _other$onKeyDown.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    const keysToPreventDefault = [' ', 'Enter', 'ArrowUp', 'ArrowDown', 'Home', 'End', 'PageUp', 'PageDown'];\n    if (keysToPreventDefault.includes(event.key)) {\n      event.preventDefault();\n    }\n    dispatch({\n      type: ActionTypes.keyDown,\n      event,\n      props: propsWithDefaults\n    });\n  };\n  const createHandleBlur = other => event => {\n    var _other$onBlur, _listboxRef$current;\n    (_other$onBlur = other.onBlur) == null ? void 0 : _other$onBlur.call(other, event);\n    if (event.defaultPrevented) {\n      return;\n    }\n    if ((_listboxRef$current = listboxRef.current) != null && _listboxRef$current.contains(document.activeElement)) {\n      // focus is within the listbox\n      return;\n    }\n    dispatch({\n      type: ActionTypes.blur,\n      event,\n      props: propsWithDefaults\n    });\n  };\n  const getRootProps = function () {\n    let other = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return _extends({}, other, {\n      'aria-activedescendant': highlightedIndex >= 0 ? optionIdGenerator(options[highlightedIndex], highlightedIndex) : undefined,\n      id,\n      onBlur: createHandleBlur(other),\n      onKeyDown: createHandleKeyDown(other),\n      role: 'listbox',\n      tabIndex: 0,\n      ref: handleRef\n    });\n  };\n  const getOptionState = option => {\n    let selected;\n    const index = options.findIndex(opt => optionComparer(opt, option));\n    if (multiple) {\n      var _ref;\n      selected = ((_ref = selectedValue) != null ? _ref : []).some(value => value != null && optionComparer(option, value));\n    } else {\n      selected = optionComparer(option, selectedValue);\n    }\n    const disabled = isOptionDisabled(option, index);\n    return {\n      selected,\n      disabled,\n      highlighted: highlightedIndex === index\n    };\n  };\n  const getOptionProps = function (option) {\n    let other = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const {\n      selected,\n      disabled\n    } = getOptionState(option);\n    const index = options.findIndex(opt => optionComparer(opt, option));\n    return {\n      'aria-disabled': disabled || undefined,\n      'aria-selected': selected,\n      id: optionIdGenerator(option, index),\n      onClick: createHandleOptionClick(option, other),\n      role: 'option'\n    };\n  };\n  return {\n    getRootProps,\n    getOptionProps,\n    getOptionState,\n    selectedOption: selectedValue,\n    highlightedOption: (_options$highlightedI = options[highlightedIndex]) != null ? _options$highlightedI : null\n  };\n}","map":{"version":3,"names":["_extends","React","unstable_useForkRef","useForkRef","unstable_useId","useId","ActionTypes","defaultReducer","useControllableReducer","areArraysEqual","defaultOptionComparer","optionA","optionB","useListbox","props","_props$optionIdGenera","_options$highlightedI","disableListWrap","disabledItemsFocusable","id","idProp","options","multiple","isOptionDisabled","optionComparer","stateReducer","externalReducer","listboxRef","externalListboxRef","defaultIdGenerator","_","index","concat","optionIdGenerator","propsWithDefaults","useRef","handleRef","highlightedIndex","selectedValue","dispatch","previousOptions","useEffect","current","type","optionsChange","createHandleOptionClick","option","other","event","_other$onClick","onClick","call","defaultPrevented","preventDefault","optionClick","createHandleKeyDown","_other$onKeyDown","onKeyDown","keysToPreventDefault","includes","key","keyDown","createHandleBlur","_other$onBlur","_listboxRef$current","onBlur","contains","document","activeElement","blur","getRootProps","arguments","length","undefined","role","tabIndex","ref","getOptionState","selected","findIndex","opt","_ref","some","value","disabled","highlighted","getOptionProps","selectedOption","highlightedOption"],"sources":["/home/johannes/osapienscode/node_modules/@mui/base/ListboxUnstyled/useListbox.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { unstable_useForkRef as useForkRef, unstable_useId as useId } from '@mui/utils';\nimport { ActionTypes } from './types';\nimport defaultReducer from './defaultListboxReducer';\nimport useControllableReducer from './useControllableReducer';\nimport areArraysEqual from '../utils/areArraysEqual';\n\nconst defaultOptionComparer = (optionA, optionB) => optionA === optionB;\n\nexport default function useListbox(props) {\n  var _props$optionIdGenera, _options$highlightedI;\n\n  const {\n    disableListWrap = false,\n    disabledItemsFocusable = false,\n    id: idProp,\n    options,\n    multiple = false,\n    isOptionDisabled = () => false,\n    optionComparer = defaultOptionComparer,\n    stateReducer: externalReducer,\n    listboxRef: externalListboxRef\n  } = props;\n  const id = useId(idProp);\n\n  function defaultIdGenerator(_, index) {\n    return `${id}-option-${index}`;\n  }\n\n  const optionIdGenerator = (_props$optionIdGenera = props.optionIdGenerator) != null ? _props$optionIdGenera : defaultIdGenerator;\n\n  const propsWithDefaults = _extends({}, props, {\n    disableListWrap,\n    disabledItemsFocusable,\n    isOptionDisabled,\n    multiple,\n    optionComparer\n  });\n\n  const listboxRef = React.useRef(null);\n  const handleRef = useForkRef(externalListboxRef, listboxRef);\n  const [{\n    highlightedIndex,\n    selectedValue\n  }, dispatch] = useControllableReducer(defaultReducer, externalReducer, propsWithDefaults);\n  const previousOptions = React.useRef([]);\n  React.useEffect(() => {\n    if (areArraysEqual(previousOptions.current, options, optionComparer)) {\n      return;\n    }\n\n    dispatch({\n      type: ActionTypes.optionsChange,\n      options,\n      previousOptions: previousOptions.current,\n      props: propsWithDefaults\n    });\n    previousOptions.current = options; // No need to re-run this effect if props change\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [options, optionComparer, dispatch]);\n\n  const createHandleOptionClick = (option, other) => event => {\n    var _other$onClick;\n\n    (_other$onClick = other.onClick) == null ? void 0 : _other$onClick.call(other, event);\n\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    event.preventDefault();\n    dispatch({\n      type: ActionTypes.optionClick,\n      option,\n      event,\n      props: propsWithDefaults\n    });\n  };\n\n  const createHandleKeyDown = other => event => {\n    var _other$onKeyDown;\n\n    (_other$onKeyDown = other.onKeyDown) == null ? void 0 : _other$onKeyDown.call(other, event);\n\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    const keysToPreventDefault = [' ', 'Enter', 'ArrowUp', 'ArrowDown', 'Home', 'End', 'PageUp', 'PageDown'];\n\n    if (keysToPreventDefault.includes(event.key)) {\n      event.preventDefault();\n    }\n\n    dispatch({\n      type: ActionTypes.keyDown,\n      event,\n      props: propsWithDefaults\n    });\n  };\n\n  const createHandleBlur = other => event => {\n    var _other$onBlur, _listboxRef$current;\n\n    (_other$onBlur = other.onBlur) == null ? void 0 : _other$onBlur.call(other, event);\n\n    if (event.defaultPrevented) {\n      return;\n    }\n\n    if ((_listboxRef$current = listboxRef.current) != null && _listboxRef$current.contains(document.activeElement)) {\n      // focus is within the listbox\n      return;\n    }\n\n    dispatch({\n      type: ActionTypes.blur,\n      event,\n      props: propsWithDefaults\n    });\n  };\n\n  const getRootProps = (other = {}) => {\n    return _extends({}, other, {\n      'aria-activedescendant': highlightedIndex >= 0 ? optionIdGenerator(options[highlightedIndex], highlightedIndex) : undefined,\n      id,\n      onBlur: createHandleBlur(other),\n      onKeyDown: createHandleKeyDown(other),\n      role: 'listbox',\n      tabIndex: 0,\n      ref: handleRef\n    });\n  };\n\n  const getOptionState = option => {\n    let selected;\n    const index = options.findIndex(opt => optionComparer(opt, option));\n\n    if (multiple) {\n      var _ref;\n\n      selected = ((_ref = selectedValue) != null ? _ref : []).some(value => value != null && optionComparer(option, value));\n    } else {\n      selected = optionComparer(option, selectedValue);\n    }\n\n    const disabled = isOptionDisabled(option, index);\n    return {\n      selected,\n      disabled,\n      highlighted: highlightedIndex === index\n    };\n  };\n\n  const getOptionProps = (option, other = {}) => {\n    const {\n      selected,\n      disabled\n    } = getOptionState(option);\n    const index = options.findIndex(opt => optionComparer(opt, option));\n    return {\n      'aria-disabled': disabled || undefined,\n      'aria-selected': selected,\n      id: optionIdGenerator(option, index),\n      onClick: createHandleOptionClick(option, other),\n      role: 'option'\n    };\n  };\n\n  return {\n    getRootProps,\n    getOptionProps,\n    getOptionState,\n    selectedOption: selectedValue,\n    highlightedOption: (_options$highlightedI = options[highlightedIndex]) != null ? _options$highlightedI : null\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}